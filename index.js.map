{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport axios from 'axios'; \n\nlet input=\"\";\nlet page=1; \nconst PER_PAGE=40;\ndocument.getElementById('load').style.display = 'none'\ndocument.getElementById(\"search-images\").addEventListener(\"input\",(event)=>{\n    input = event.target.value;\n    console.log(input);\n        // Eğer arama kutusu boşsa butonu devre dışı bırak\n        if (input === \"\") {\n          document.getElementById(\"button-search\").setAttribute(\"disabled\", true);\n      } else {\n        document.getElementById(\"button-search\").removeAttribute(\"disabled\"); // Butonu etkinleştir\n      }\n});\n\ndocument.getElementById(\"button-search\").addEventListener(\"click\",()=>{\n    if (input.trim() !== \"\")\n    page=1;\n    document.getElementById(\"gallery\").innerHTML = \"\"; // Galeriyi temizle\n\n\n    fetchImages(input);\n\n})\ninput=\"\";\nlet totalHits;\n\nasync function fetchImages(query) {\n\n\n    const API_KEY=\"46148629-af6e53c51d7dfe0604412e9db\";\n    const URL = `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&per_page=${PER_PAGE}&page=${page}`;\n    try{\n        const response = await axios.get(URL);\n        totalHits = response.data.totalHits; // Correctly assign totalHits\n        const hits = response.data.hits; // Correctly destructure hits\n      \n        //bos bir dizi donduyse bu mesaji kullaniciya göstericem\n        if (totalHits === 0){\n            iziToast.show({\n                title: 'No Images',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight', // Bildirimin konumu\n                timeout: 5000, // 5 saniye sonra otomatik kapanır\n                color: 'warning', // Bildirim rengi (success, warning, info, error)\n            });\n            document.getElementById('load').style.display = 'none';\n            return;\n        }\n        displayImages(hits);\n     \n\n    }   \n    catch(e){\n        console.log(\"Photos can't taken\");\n        iziToast.error({\n            title: 'Error',\n            message: e.message,\n            position: 'topRight'\n        });\n    }\n    console.log(`Current Page: ${page}, Per Page: ${PER_PAGE}, Total Hits: ${totalHits}`);\n\n  }\n\n  function updateLoadMoreButton(totalHits) {\n    const loadedImages = page * PER_PAGE;\n    \n    if (loadedImages >= totalHits) {\n        document.getElementById('load').style.display = 'none';\n        iziToast.show({\n            title: 'End of Results',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            timeout: 5000,\n            color: 'info',\n        });\n    } else {\n        document.getElementById('load').style.display = 'block';\n    }\n}\n  \n  document.getElementById('load').addEventListener('click', () => {\n    page++; // Sayfayı arttır\n    fetchImages(input); \n    console.log(\"load buttona tıkladım\");\n});\n\n\nfunction displayImages(images){\n    const imagediv = document.getElementById(\"image-results\");\n    const galleryUl = document.getElementById(\"gallery\");\n    const loadButton = document.getElementById('load');\n\n    // Önce \"Load More\" butonunu kaldır\n    if (loadButton) {\n        loadButton.remove();\n    }\n  \n    images.forEach(image => {\n\n\n        const img = document.createElement(\"img\");\n        img.src = image.webformatURL;\n        img.alt = image.tags;\n        img.dataset.source = image.largeImageURL; // dataset.source ekle\n\n\n        const link=document.createElement(\"a\");\n        link.classList.add(\"link-a\");\n        link.href = image.largeImageURL;\n        link.setAttribute(\"data-lightbox\", \"gallery\"); // SimpleLightbox için gerekli\n        link.appendChild(img);\n\n                // Bilgileri içeren div oluştur\n        const imgList = document.createElement(\"li\");\n        imgList.classList.add(\"image-list\");\n        imgList.appendChild(link);\n\n        const infoDiv = document.createElement(\"div\");\n        infoDiv.classList.add(\"image-info\");\n\n        const likes = document.createElement(\"p\");\n        likes.innerHTML=`<div class=\"notes\">\n        <p class=\"foto-note\" id=\"likes\">Likes</p>\n        <p>${image.likes}</p>`;\n\n        const views = document.createElement(\"p\");\n        views.innerHTML=`<div class=\"notes\">\n        <p class=\"foto-note\" id=\"views\">Views</p>\n        <p>${image.views}</p>`;\n\n        const comments = document.createElement(\"p\");\n        comments.innerHTML=`<div class=\"notes\">\n        <p class=\"foto-note\" id=\"comments\">Comments</p>\n        <p> ${image.comments}</p>\n        </div>`;\n\n        const download = document.createElement(\"p\");\n        download.innerHTML=`<div class=\"notes\">\n        <p class=\"foto-note\" id=\"download\">Downloads</p>\n        <p>${image.downloads}</p>\n        </div>`;\n\n        infoDiv.appendChild(likes);\n        infoDiv.appendChild(views);\n        infoDiv.appendChild(comments);\n        infoDiv.appendChild(download);\n\n        imgList.appendChild(infoDiv);\n\n        galleryUl.appendChild(imgList);\n        document.body.appendChild(galleryUl);\n\n\n    });\n \n\n    new SimpleLightbox('#gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250\n      });\n\n      const imageResults = document.getElementById('image-results');\n      imageResults.appendChild(loadButton);\n  \n\n      clickTheElements();\n      updateLoadMoreButton(totalHits);\n}\n\n\nexport function clickTheElements(){\n    const imagesDom = document.querySelectorAll('.link-a');\n    let currentLightBox = null; \n    let currentIndex = 0;\n\n  imagesDom.forEach((link,index) => \n  {\n      link.addEventListener('click', (event) => {\n        event.preventDefault();\n        currentIndex=index;\n\n        if (event.target.nodeName !== \"IMG\") {\n          return; // kullanıcı fotografların arasına tıkladı\n        }\n        const selectedImageSrc = link.getAttribute('href');\n        const selectedImageAlt = link.querySelector('img').alt;\n  \n          const modal = new SimpleLightbox(\n            {\n              items: [\n                {\n                    src: selectedImageSrc,\n                    alt: selectedImageAlt,\n                },\n                ...Array.from(imagesDom).map(img => ({\n                    src: img.getAttribute('href'),\n                    alt: img.querySelector('img').alt,\n                }))\n            ],\n            captionsData: `${selectedImageAlt}`, // Açıklama için title özniteliğini kullan\n            captionDelay: 250\n          });\n          modal.showModal();\n          currentLightBox = modal;\n                      // Modal içeriğini güncelle\n                      modal.on('show.simplelightbox', () => {\n                        modal.select(currentIndex);\n                    });\n          const prevBtn = modal.element().querySelector('#prev');\n          const nextBtn = modal.element().querySelector('#next');\n\n          prevBtn.addEventListener(\"click\", () => {\n            currentIndex = (currentIndex > 0) ? currentIndex - 1 : imagesDom.length - 1;\n            updateModal(modal, imagesDom[currentIndex]);\n\n            const newSrc = imagesDom[currentIndex].querySelector('img').dataset.source; // Doğru kaynak\n            const newAlt = imagesDom[currentIndex].querySelector('img').alt; // Alt metni al\n            modal.element().querySelector('img').src = newSrc;\n            modal.element().querySelector('img').alt = newAlt;\n          });\n      \n          nextBtn.addEventListener(\"click\", () => {\n            currentIndex = (currentIndex < imagesDom.length - 1) ? currentIndex + 1 : 0;\n            updateModal(modal, imagesDom[currentIndex]);\n\n            const newSrc = imagesDom[currentIndex].querySelector('img').dataset.source; // Doğru kaynak\n            const newAlt = imagesDom[currentIndex].querySelector('img').alt; // Alt metni al\n            modal.element().querySelector('img').src = newSrc;\n            modal.element().querySelector('img').alt = newAlt;\n          });\n  \n          \n      const onKeyDownEsc = (event)=>{\n        if((event.key === \"Escape\" || event.key === \"Esc\") && currentLightBox){\n        currentLightBox.close();\n        document.removeEventListener(\"keydown\",onKeyDownEsc);\n        currentLightBox = null;\n      }\n  \n    }\n\n    document.addEventListener(\"keydown\",onKeyDownEsc);\n    \n      });\n  });\n\n}"],"names":["input","page","PER_PAGE","event","fetchImages","totalHits","query","URL","response","axios","hits","iziToast","displayImages","e","updateLoadMoreButton","images","galleryUl","loadButton","image","img","link","imgList","infoDiv","likes","views","comments","download","SimpleLightbox","clickTheElements","imagesDom","currentLightBox","currentIndex","index","selectedImageSrc","selectedImageAlt","modal","prevBtn","nextBtn","newSrc","newAlt","onKeyDownEsc"],"mappings":"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"}